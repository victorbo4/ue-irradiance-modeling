\doxysection{Irradiance\+Subsystem.\+h}
\hypertarget{_irradiance_subsystem_8h_source}{}\label{_irradiance_subsystem_8h_source}\index{Source/Pyrano/Public/Subsystems/IrradianceSubsystem.h@{Source/Pyrano/Public/Subsystems/IrradianceSubsystem.h}}
\mbox{\hyperlink{_irradiance_subsystem_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*=============================================================================}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ \ \ \ IrradianceSubsystem.h}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ \ Performs\ 6-\/face\ cubemap\ capture,\ manages\ the\ capture\ camera\ and\ viewport,\ }}
\DoxyCodeLine{00004\ \textcolor{comment}{\ \ and\ computes\ final\ irradiance\ values\ from\ GPU\ results.}}
\DoxyCodeLine{00005\ \textcolor{comment}{/============================================================================*/}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}CoreMinimal.h"{}}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ "{}Subsystems/WorldSubsystem.h"{}}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ "{}Tickable.h"{}}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ "{}RHIGPUReadback.h"{}}\ \ \ \ }
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ "{}RenderGraphResources.h"{}}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_irradiance_view_extension_8h}{Irradiance/IrradianceViewExtension.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_irradiance_exporter_8h}{Irradiance/IrradianceExporter.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_ineichen_perez_clear_sky_8h}{IneichenPerezClearSky.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_capture_request_8h}{Simulation/CaptureRequest.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}IrradianceSubsystem.generated.h"{}}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{keyword}{struct\ }IPooledRenderTarget;}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/\ CAPTURE\ STATE\ MACHINE\ -\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00023\ \textcolor{keyword}{enum\ class}\ \mbox{\hyperlink{_irradiance_subsystem_8h_adaf091de3734820aa6007fc0837bc023}{ECaptureState}}\ :\ uint8}
\DoxyCodeLine{00024\ \{}
\DoxyCodeLine{00025\ \ \ \ \ \mbox{\hyperlink{_irradiance_subsystem_8h_adaf091de3734820aa6007fc0837bc023ae599161956d626eda4cb0a5ffb85271c}{Idle}},}
\DoxyCodeLine{00026\ \ \ \ \ \mbox{\hyperlink{_irradiance_subsystem_8h_adaf091de3734820aa6007fc0837bc023a62411b76d12a4ad116da05c356ff9bf3}{Capturing}},}
\DoxyCodeLine{00027\ \ \ \ \ \mbox{\hyperlink{_irradiance_subsystem_8h_adaf091de3734820aa6007fc0837bc023ae9d0d8f1ac8fb7f997cad98848f7844e}{WaitingReadback}}}
\DoxyCodeLine{00028\ \};}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/\ CAPTURE\ CONTEXT\ -\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00032\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_f_capture_context}{FCaptureContext}}}
\DoxyCodeLine{00033\ \{}
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ int32\ \mbox{\hyperlink{struct_f_capture_context_a7d93ec42ea45017edfa8deb4de8dd40a}{NumFaces}}\ =\ 6;}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00037\ \ \ \ \ \mbox{\hyperlink{struct_f_capture_request}{FCaptureRequest}}\ \mbox{\hyperlink{struct_f_capture_context_ab6eb4d17536923427a81864e956c78cf}{Request}};}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00040\ \ \ \ \ int32\ \mbox{\hyperlink{struct_f_capture_context_af2fdaee0aa01585bd09173c413ea4696}{FaceIndex}}\ =\ 0;}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00043\ \ \ \ \ int32\ \mbox{\hyperlink{struct_f_capture_context_ae46242cc07a73c980f2550154cfc1512}{FacesCollected}}\ =\ 0;}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00046\ \ \ \ \ TArray<FQuat>\ \mbox{\hyperlink{struct_f_capture_context_a9de892b236dcc02aa9a3c31405a5898f}{FixedFaceRots}};}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00049\ \ \ \ \ TStaticArray<TRefCountPtr<IPooledRenderTarget>,\ \mbox{\hyperlink{struct_f_capture_context_a7d93ec42ea45017edfa8deb4de8dd40a}{NumFaces}}>\ \mbox{\hyperlink{struct_f_capture_context_a4406091393cd4bfd27575811ab2c4f98}{FaceRTs}};}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00052\ \ \ \ \ TRefCountPtr<FRDGPooledBuffer>\ \mbox{\hyperlink{struct_f_capture_context_a0193c57c6509d34a9bf4cf212cfd280b}{ExtractedIrradianceBuffer}};}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00055\ \ \ \ \ TUniquePtr<FRHIGPUBufferReadback>\ \mbox{\hyperlink{struct_f_capture_context_aee33529068029dc391428a59f66faa6f}{IrradianceReadback}};}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_f_capture_context_ad40977fc49bd9a5afe9fd1d58cae4dfd}{bReadbackEnqueued}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \textcolor{comment}{//\ -\/-\/-\/\ API\ -\/-\/-\/}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_f_capture_context_a49bc88a3cafd2583f22607358f55e001}{Begin}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_f_capture_request}{FCaptureRequest}}\&\ InRequest);}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_f_capture_context_a3d5e5da9a8a7086472b65c746bdd61f8}{Reset}}();}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_f_capture_context_a1a4f5dc16f806c8de7d277b0e4c473a9}{IsValid}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \textcolor{comment}{//\ -\/-\/-\/\ Request\ getters\ -\/-\/-\/}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ FVector\ \ \ \mbox{\hyperlink{struct_f_capture_context_a339dc50bccca7be33f8ac85c69b8898e}{GetPosWS}}()\ \ \ \ \ \ \textcolor{keyword}{const};}
\DoxyCodeLine{00074\ \ \ \ \ FVector\ \ \ \mbox{\hyperlink{struct_f_capture_context_a4b292e9b89d2d6c43ae0c40acccbc454}{GetNormalWS}}()\ \ \ \textcolor{keyword}{const};}
\DoxyCodeLine{00075\ \ \ \ \ int32\ \ \ \ \ \mbox{\hyperlink{struct_f_capture_context_ad4c4a2347acd2cf8441189244a495629}{GetSidePx}}()\ \ \ \ \ \textcolor{keyword}{const};}
\DoxyCodeLine{00076\ \ \ \ \ uint32\ \ \ \ \mbox{\hyperlink{struct_f_capture_context_aa7afdf98d2032b2a4869829facf4a827}{GetWarmup}}()\ \ \ \ \ \textcolor{keyword}{const};}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_f_capture_request}{FCaptureRequest}}\&\ \mbox{\hyperlink{struct_f_capture_context_a03905ed9b8803744c70caa60d7cb65b7}{GetRequest}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \textcolor{comment}{//\ -\/-\/-\/\ Face\ management\ -\/-\/-\/}}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keyword}{const}\ FQuat\&\ \mbox{\hyperlink{struct_f_capture_context_a69092e0e97b4b3707c3e639ea18ff243}{GetCurrentFaceRot}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_f_capture_context_a287eed9dee265b14249f958e3c8ebb97}{HasMoreFaces}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_f_capture_context_a0eb45abcfb2f58db4083a03bd71bfe66}{IsLastFace}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00084\ \ \ \ \ int32\ \mbox{\hyperlink{struct_f_capture_context_a33b64d07dc668e5094fb40e8aad3590c}{GetCurrentFaceIndex}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_f_capture_context_a8ed9c170d33b910f13d8c104849936f3}{StoreFaceRT}}(TRefCountPtr<IPooledRenderTarget>\&\&\ InRT);}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_f_capture_context_affa457ffc336f3d77d60760fb0df99dc}{AdvanceFace}}();}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_f_capture_context_aada738011e7943b76082fca9a6cb0dcf}{MarkFacesDone}}();}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_f_capture_context_a5d391b900cc41be51e0f77226bc754cc}{AreFacesReady}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_f_capture_context_a17557cda4962077c8aef96ac85240abf}{GatherFaces}}(TRefCountPtr<IPooledRenderTarget>\ OutFaces[\mbox{\hyperlink{struct_f_capture_context_a7d93ec42ea45017edfa8deb4de8dd40a}{NumFaces}}])\ \textcolor{keyword}{const};}
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_f_capture_context_a98de327f29d3e176a517fb20099f0b80}{ArmFace}}(\textcolor{keyword}{class}\ \mbox{\hyperlink{class_f_irradiance_view_extension}{FIrradianceViewExtension}}*\ VE)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \textcolor{comment}{//\ -\/-\/-\/\ Readback\ state\ helpers\ -\/-\/-\/}}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_f_capture_context_a9d93a5610b81e651cfb9bdb2aac0e700}{HasActiveReadback}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_f_capture_context_ad40977fc49bd9a5afe9fd1d58cae4dfd}{bReadbackEnqueued}}\ \&\&\ \mbox{\hyperlink{struct_f_capture_context_aee33529068029dc391428a59f66faa6f}{IrradianceReadback}}.IsValid();\ \}}
\DoxyCodeLine{00096\ \ \ \ \ }
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_f_capture_context_ae0311f1a936244bbd879608f5bf83ad4}{NeedsReadbackEnqueue}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_f_capture_context_ad40977fc49bd9a5afe9fd1d58cae4dfd}{bReadbackEnqueued}}\ \&\&\ \mbox{\hyperlink{struct_f_capture_context_a0193c57c6509d34a9bf4cf212cfd280b}{ExtractedIrradianceBuffer}}.IsValid()\ \&\&\ !\mbox{\hyperlink{struct_f_capture_context_aee33529068029dc391428a59f66faa6f}{IrradianceReadback}};\ \}}
\DoxyCodeLine{00099\ \ \ \ \ }
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_f_capture_context_a4d2b1916f8e8f2435976059b2126c0fd}{IsFinished}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ !\mbox{\hyperlink{struct_f_capture_context_a287eed9dee265b14249f958e3c8ebb97}{HasMoreFaces}}()\ \&\&\ !\mbox{\hyperlink{struct_f_capture_context_ad40977fc49bd9a5afe9fd1d58cae4dfd}{bReadbackEnqueued}};\ \}}
\DoxyCodeLine{00102\ \};}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/\ IRRADIANCE\ SUBSYSTEM\ -\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00106\ UCLASS()}
\DoxyCodeLine{00107\ class\ \mbox{\hyperlink{class_u_irradiance_subsystem}{UIrradianceSubsystem}}\ :\ public\ UWorldSubsystem,\ public\ FTickableGameObject}
\DoxyCodeLine{00108\ \{}
\DoxyCodeLine{00109\ \ \ \ \ GENERATED\_BODY()}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \textcolor{comment}{//\ -\/-\/-\/\ Life\ Cycle\ -\/-\/-\/}}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_u_irradiance_subsystem_a4f7c8b64d5535835f83975cd7d10189f}{Initialize}}(FSubsystemCollectionBase\&\ Collection)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_u_irradiance_subsystem_a6a6bf9fbdea8547a1ca8adb550c132db}{Deinitialize}}()\ \textcolor{keyword}{override};\ \ \ }
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_u_irradiance_subsystem_aa39325519944418c4584b788788af3af}{ShouldCreateSubsystem}}(UObject*\ Outer)\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_u_irradiance_subsystem_ad3336fe0d04f79cf1c1eb2ecdb226325}{Tick}}(\textcolor{keywordtype}{float}\ DeltaTime)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \textcolor{comment}{//\ -\/-\/-\/\ Tickable\ -\/-\/-\/}}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{keyword}{virtual}\ TStatId\ \mbox{\hyperlink{class_u_irradiance_subsystem_a8ec30d9390d84774c315f6d5cab53a59}{GetStatId}}()\textcolor{keyword}{\ const\ override\ }\{\ RETURN\_QUICK\_DECLARE\_CYCLE\_STAT(\mbox{\hyperlink{class_u_irradiance_subsystem}{UIrradianceSubsystem}},\ STATGROUP\_Tickables);\ \}}
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{keyword}{virtual}\ ETickableTickType\ \mbox{\hyperlink{class_u_irradiance_subsystem_a0e6420f63e09e41da61a9a03cd4f84f0}{GetTickableTickType}}()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ ETickableTickType::Always;\ \}}
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keyword}{virtual}\ UWorld*\ \mbox{\hyperlink{class_u_irradiance_subsystem_a12a3fafc46b8c62e6d431f1ee77e7f8e}{GetTickableGameObjectWorld}}()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ GetWorld();\ \}}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \textcolor{comment}{//\ -\/-\/-\/\ Public\ API\ -\/-\/-\/\ }}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{keywordtype}{void}\ StartSixFaceCapture(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_f_capture_request}{FCaptureRequest}}\&\ Req);}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{keywordtype}{void}\ ConfigureExport(\textcolor{keywordtype}{bool}\ bCSV,\ \textcolor{keywordtype}{bool}\ bExportImages,\ \textcolor{keyword}{const}\ FString\&\ OutputDirPath);}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keywordtype}{bool}\ ConsumeLatestIrradiance(\textcolor{keywordtype}{float}\&\ OutValue,\ \textcolor{keywordtype}{float}\ MinSunAltitude\ =\ 0.f);}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{keywordtype}{void}\ FlushExporter();}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \textcolor{comment}{//\ -\/-\/-\/\ Viewport\ management\ -\/-\/-\/}}
\DoxyCodeLine{00152\ }
\DoxyCodeLine{00154\ \ \ \ \ \textcolor{keywordtype}{bool}\ ForceSquareViewportPIE(int32\ SidePx);}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00157\ \ \ \ \ \textcolor{keywordtype}{void}\ RestoreViewportPIE();}
\DoxyCodeLine{00158\ }
\DoxyCodeLine{00160\ \ \ \ \ \textcolor{keywordtype}{void}\ EndHijackView();}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \textcolor{comment}{//\ -\/-\/-\/\ Sky\ Factor\ -\/-\/-\/}}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00165\ \ \ \ \ \textcolor{keywordtype}{float}\ ComputeSkyViewFactor(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_f_capture_request}{FCaptureRequest}}\&\ Req,\ int32\ NumSamples)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \textcolor{comment}{//\ -\/-\/-\/\ Clear\ Sky\ Service\ -\/-\/-\/}}
\DoxyCodeLine{00168\ \ \ \ \ \mbox{\hyperlink{class_u_clear_sky_service}{UClearSkyService}}*\ \mbox{\hyperlink{class_u_irradiance_subsystem_a675b139159a8c27f5bccac86c40ba3cf}{GetClearSky}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_u_irradiance_subsystem_ac960b22a9534dd11f85df1a511861cc7}{ClearSky}};\ \}}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00170\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \textcolor{comment}{//\ -\/-\/-\/\ Internal\ state\ -\/-\/-\/}}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00175\ \ \ \ \ \mbox{\hyperlink{struct_f_capture_context}{FCaptureContext}}\ \mbox{\hyperlink{class_u_irradiance_subsystem_a2feb8a14a141983c15815292c6310138}{Capture}};}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00178\ \ \ \ \ \mbox{\hyperlink{_irradiance_subsystem_8h_adaf091de3734820aa6007fc0837bc023}{ECaptureState}}\ \mbox{\hyperlink{class_u_irradiance_subsystem_a4ede1df50d8a4260c5454d4ac0a6ce48}{State}}\ =\ \mbox{\hyperlink{_irradiance_subsystem_8h_adaf091de3734820aa6007fc0837bc023ae599161956d626eda4cb0a5ffb85271c}{ECaptureState::Idle}};}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00181\ \ \ \ \ TSharedPtr<class\ FIrradianceViewExtension,\ ESPMode::ThreadSafe>\ \mbox{\hyperlink{class_u_irradiance_subsystem_a378a10af536b26d52e9c2e7841ce011e}{ViewExt}};}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00184\ \ \ \ \ std::atomic<bool>\ \mbox{\hyperlink{class_u_irradiance_subsystem_af4c43fc33b02171907d2a2abb9e0de10}{bIrradianceValueReady}}\{\ \textcolor{keyword}{false}\ \};}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00187\ \ \ \ \ std::atomic<float>\ \mbox{\hyperlink{class_u_irradiance_subsystem_a7e58f8fcd1716b0b38001f0363975b91}{LastIrradianceMean}}\{\ 0.0f\ \};}
\DoxyCodeLine{00188\ \ \ \ \ std::atomic<float>\ \mbox{\hyperlink{class_u_irradiance_subsystem_af133834f2c35250f19a3e9d73ea9bcd5}{LastIrradianceR}}\{\ 0.0f\ \};}
\DoxyCodeLine{00189\ \ \ \ \ std::atomic<float>\ \mbox{\hyperlink{class_u_irradiance_subsystem_a7a8bda9667b0836ab6a0e79afda3c1ec}{LastIrradianceG}}\{\ 0.0f\ \};}
\DoxyCodeLine{00190\ \ \ \ \ std::atomic<float>\ \mbox{\hyperlink{class_u_irradiance_subsystem_a8e7818f0f748e60ed21fe0699079a89f}{LastIrradianceB}}\{\ 0.0f\ \};}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ \textcolor{comment}{//\ -\/-\/-\/\ Capture\ -\/\ GPU\ Pipeline\ -\/-\/-\/}}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00195\ \ \ \ \ \textcolor{keywordtype}{void}\ TickCapturing();}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{keywordtype}{void}\ TickReadback();}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00201\ \ \ \ \ \textcolor{keywordtype}{void}\ EnqueueReadbackCopy();}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00204\ \ \ \ \ \textcolor{keywordtype}{void}\ EnqueueReadbackPolling();}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00207\ \ \ \ \ \textcolor{keywordtype}{void}\ EnsureCaptureCamera();}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00210\ \ \ \ \ \textcolor{keywordtype}{void}\ StartFaceCapture(\textcolor{keyword}{const}\ FVector\&\ PosWS,\ \textcolor{keyword}{const}\ FQuat\&\ RotWS);}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00213\ \ \ \ \ \textcolor{keywordtype}{void}\ ComputeFinalIrradiance();}
\DoxyCodeLine{00214\ }
\DoxyCodeLine{00216\ \ \ \ \ \textcolor{keywordtype}{bool}\ ComputeSunOcclusion(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_f_capture_request}{FCaptureRequest}}\&\ Req,\ \textcolor{keywordtype}{bool}\&\ bOutSunOccluded,\ \textcolor{keywordtype}{float}\&\ OutHitDistanceM)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00219\ \ \ \ \ \textcolor{keywordtype}{float}\ ComputeSunVisibility(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_f_capture_request}{FCaptureRequest}}\&\ Req,\ int32\ NumSamples)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00221\ \textcolor{comment}{//\ -\/-\/-\/\ Viewport\ state\ -\/-\/-\/}}
\DoxyCodeLine{00222\ }
\DoxyCodeLine{00223\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_u_irradiance_subsystem_a52b3533e90998e4897ed6f52adce5ff4}{bForcedRes}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00224\ \ \ \ \ TWeakPtr<class\ SWindow>\ \mbox{\hyperlink{class_u_irradiance_subsystem_a6f73cd68e330b30cfb6887b55f2777ec}{PrevPIEWindow}};}
\DoxyCodeLine{00225\ \ \ \ \ FIntPoint\ \mbox{\hyperlink{class_u_irradiance_subsystem_ab8868668e247e3ef52f8aacbb79963c4}{PrevViewportSize}}\ \ =\ FIntPoint::ZeroValue;}
\DoxyCodeLine{00226\ \ \ \ \ FIntPoint\ \mbox{\hyperlink{class_u_irradiance_subsystem_a1117688f07b56ad559e8cb8235ec2c56}{PrevPIEWindowSize}}\ =\ FIntPoint::ZeroValue;}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00228\ \textcolor{comment}{//\ -\/-\/-\/\ Export\ -\/-\/-\/}}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00230\ \ \ \ \ UPROPERTY(Transient)}
\DoxyCodeLine{00231\ \ \ \ \ TObjectPtr<\mbox{\hyperlink{class_u_irradiance_exporter}{UIrradianceExporter}}>\ \mbox{\hyperlink{class_u_irradiance_subsystem_a4721b22feb3b45178fed9473ba7b6e93}{Exporter}}\ =\ \textcolor{keywordtype}{nullptr};}
\DoxyCodeLine{00232\ \ \ \ \ \mbox{\hyperlink{struct_f_export_options}{FExportOptions}}\ \ \ \ \ \ \ \mbox{\hyperlink{class_u_irradiance_subsystem_a16aa6a87908fc23af4218d7fd66dfd07}{ExportOptions}};}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00234\ \textcolor{comment}{//\ -\/-\/-\/\ View\ hijack\ state\ -\/-\/-\/\ }}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_u_irradiance_subsystem_a35c3422727eddb569d945aab06a4bad1}{bIsHijacked}}\ =\ false;}
\DoxyCodeLine{00237\ \ \ \ \ TWeakObjectPtr<AActor>\ \mbox{\hyperlink{class_u_irradiance_subsystem_a831ca02563d00d47e90d386e607515c7}{PrevViewTarget}}\ \ \ =\ \textcolor{keywordtype}{nullptr};}
\DoxyCodeLine{00238\ \ \ \ \ TWeakObjectPtr<ACameraActor>\ \mbox{\hyperlink{class_u_irradiance_subsystem_a93d5dbd784754cadeb8d216b45caabeb}{CaptureCam}}\ =\ \textcolor{keywordtype}{nullptr};}
\DoxyCodeLine{00239\ }
\DoxyCodeLine{00240\ \textcolor{comment}{//\ -\/-\/-\/\ Clear\ Sky\ Service\ -\/-\/-\/}}
\DoxyCodeLine{00241\ \ \ \ \ UPROPERTY(Transient)}
\DoxyCodeLine{00242\ \ \ \ \ TObjectPtr<\mbox{\hyperlink{class_u_clear_sky_service}{UClearSkyService}}>\ \mbox{\hyperlink{class_u_irradiance_subsystem_ac960b22a9534dd11f85df1a511861cc7}{ClearSky}}\ =\ \textcolor{keywordtype}{nullptr};}
\DoxyCodeLine{00243\ }
\DoxyCodeLine{00244\ \};}

\end{DoxyCode}
